<div class="form-container">
    <form [formGroup]="userForm" (ngSubmit)="addUser()">
        <div class="form-header">
            <span class="form-header-icon">üë§</span>
            CREATE USER
        </div>
        <div class="form-grid">
            <!-- User Name -->
            <div class="form-group">
                <label for="name">User Name</label>
                <input type="text" formControlName="userName" placeholder="Username" />
                <div class="error-message" *ngIf="userForm.get('userName')?.touched && userForm.get('userName')?.invalid">
                    Username is required.
                </div>
            </div>

            <!-- Password -->
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" formControlName="password" placeholder="Password" />
                <div class="error-message" *ngIf="userForm.get('password')?.touched && userForm.get('password')?.invalid">
                    Password is required.
                </div>
            </div>

            <!-- Email -->
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" formControlName="email" placeholder="user@example.com" />
                <div class="error-message" *ngIf="userForm.get('email')?.touched && userForm.get('email')?.invalid">
                    <span *ngIf="userForm.get('email')?.errors?.['required']">Email is required.</span>
                    <span *ngIf="userForm.get('email')?.errors?.['email']">Enter a valid email.</span>
                </div>
            </div>

            <!-- Select Role -->
            <div class="form-group">
                <label>Select Role</label>
                <div class="custom-dropdown">
                    <select value="Select Role" formControlName="roleId">
                        <option value="" disabled selected>Select Role</option>
                        <option [value]="role.roleId" *ngFor="let role of roles">{{ role.roleName }}</option>
                    </select>
                    <mat-icon class="dropdown-icon">expand_more</mat-icon>
                </div>
                <div class="error-message" *ngIf="userForm.get('roleId')?.touched && userForm.get('roleId')?.invalid">
                    Role is required.
                </div>
            </div>

            <!-- Phone Number -->
            <div class="form-group">
                <label for="phoneNumber">Phone Number</label>
                <input type="text" formControlName="phoneNumber" placeholder="Phone Number" />
                <div class="error-message" *ngIf="userForm.get('phoneNumber')?.touched && userForm.get('phoneNumber')?.invalid">
                    Phone number is required.
                </div>
            </div>
        </div>

        <!-- Submit and Cancel Buttons -->
        <div class="form-actions">
            <button class="submit-button" type="submit">Add User</button>
            <button class="cancel-button" type="button" (click)="onCancel()">Cancel</button>
        </div>
    </form>
</div>

<div class="form-container" *ngIf="isAgentDetailsVisible">
    <form [formGroup]="agentForm" (ngSubmit)="addAgentDetails()">
        <div class="form-header">
            <span class="form-header-icon">ü§ù</span>
            ADD AGENT DETAILS
        </div>
        <div class="form-grid">

            <!-- First Name -->
            <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" formControlName="firstName" placeholder="First Name" />
                <div class="error-message" *ngIf="agentForm.get('firstName')?.touched && agentForm.get('firstName')?.invalid">
                    First Name is required.
                </div>
            </div>

            <!-- Last Name -->
            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" formControlName="lastName" placeholder="Last Name" />
                <div class="error-message" *ngIf="agentForm.get('lastName')?.touched && agentForm.get('lastName')?.invalid">
                    Last Name is required.
                </div>
            </div>

            <!-- Date of Birth -->
            <div class="form-group">
                <label for="dob">Date of Birth</label>
                <div class="mat-form-field">
                    <input matInput id="dob" formControlName="dateOfBirth" [matDatepicker]="picker" placeholder="DD-MM-YYYY" />
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </div>
                <div class="error-message" *ngIf="agentForm.get('dateOfBirth')?.touched && agentForm.get('dateOfBirth')?.invalid">
                    Date of Birth is required.
                </div>
            </div>
             <!-- Active Since -->
            <div class="form-group">
                <label for="activeSince">Active Since</label>
                <div class="mat-form-field">
                    <input matInput id="activeSince" formControlName="activeSince" [matDatepicker]="picker2" placeholder="DD-MM-YYYY" />
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                </div>
                 <div class="error-message" *ngIf="agentForm.get('activeSince')?.touched && agentForm.get('dateOfBirth')?.invalid">
                    Date of Joining is required.
                </div>
            </div>
            <!-- Gender -->
            <div class="form-group gender-group">
                <label for="gender">Gender</label>
                <div class="toggle-container">
                    <input type="checkbox" id="gender-toggle" formControlName="gender" />
                    <label class="toggle-label" for="gender-toggle">
                        <span class="toggle-ball"></span>
                    </label>
                    <span class="gender-text">{{ agentForm.get('gender')?.value ? 'Male' : 'Female' }}</span>
                </div>
            </div>
           
        </div>

        <!-- Submit and Cancel Buttons -->
        <div class="form-actions">
            <button class="submit-button" type="submit" [disabled]="agentForm.invalid">Add Agent Details</button>
            <button class="cancel-button" type="button" (click)="onCancel()">Cancel</button>
        </div>
    </form>
</div>
